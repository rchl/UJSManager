<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="shortcut icon" href="favicon.16x16.png" type="image/x-icon"/>
  <link rel="stylesheet" type="text/css" href="client_style.css" />
  <title>UJS Manager script installation</title>
</head>
<body>
  <div id="dialog">
    <h1><img src="favicon.48x48.png"> UJS Manager <span>user script installation</span></h1>
    <form action="{{admin_url}}" method="post" enctype="multipart/form-data">
      <p>Are you sure you want to install user script from this location?<br>
      You should only install it if you trust that it's secure!</p>
      <code>{{install_url}}</code>
      <input type="hidden" name="confirm" value="1">
      <input type="hidden" name="unique_id" value="{{unique_id}}">
      <input type="hidden" name="install_script" value="{{install_url}}">
      <input type="hidden" name="filename" value="{{filename}}" data-keep-if="ask_overwrite">
      <textarea name="script_body">{{script_body}}</textarea>

      <p>User script will be saved with this name: <input name="filename" value="{{filename}}"></p>

      <span>You may change name but keep in mind that changing extension from <code>user.js</code>
      to <code>js</code> or vice-versa might break script.</span>

      <p class="warning" data-keep-if="ask_overwrite">Script with that name already
        exists in your user scripts directory.<br>It will be overwritten if you proceed.
      </p>
      <table data-keep-if="ask_overwrite">
        <tr>
          <th>current script header</th>
          <th>new script header</th>
        </tr>
        <tr>
          <td>
            <div data-list="old_header">
              <b data-keep-if="old_header[].key">{{old_header[].key}}</b>
              {{old_header[].value}}
            </div>
          </td>
          <td>
            <div data-list="new_header">
              <b data-keep-if="new_header[].key">{{new_header[].key}}</b>
              {{new_header[].value}}
            </div>
          </td>
      </table>
      <p>
        <input type="hidden" name="overwrite" value="1" data-keep-if="ask_overwrite">
        <button type="submit" data-keep-if="ask_overwrite">Update script</button>
        <button type="submit" data-remove-if="ask_overwrite">Install script</button>
        <button type="button" onclick="javascript:history.back()">Go back</button>
      </p>
    </form>
  </div>
</body>
</html>